<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consensus & PoW - Fleet Credits Developer Documentation</title>
    <link rel="stylesheet" href="../assets/css/main.css">
</head>
<body>
    <div class="docs-container">
        <!-- Sidebar Navigation -->
<aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">ğŸš€</span>
                    <span class="logo-text">Fleet Credits</span>
                </div>
                <div class="version">v1.0.0 - Core</div>
                <div class="tagline">Scrypt PoW Blockchain with Contribution Rewards & MWEB Privacy</div>
                <div class="subtagline">âœ¨ Complete Developer Documentation</div>
            </div>

            <div class="search-box">
                <input type="text" placeholder="Search documentation..." id="searchInput">
            </div>

            <nav class="nav-menu">
                <div class="nav-section">
                    <div class="nav-section-title">GETTING STARTED</div>
                    <a href="../index.html" class="nav-item">
                        <span class="nav-icon">ğŸ </span>
                        <span>Overview</span>
                    </a>
                    <a href="architecture.html" class="nav-item">
                        <span class="nav-icon">ğŸ›ï¸</span>
                        <span>Architecture</span>
                    </a>
                    <a href="network-params.html" class="nav-item">
                        <span class="nav-icon">âš™ï¸</span>
                        <span>Network Parameters</span>
                    </a>
                    <a href="building.html" class="nav-item">
                        <span class="nav-icon">ğŸ”¨</span>
                        <span>Building & Setup</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">CORE BLOCKCHAIN</div>
                    <a href="blockchain-core.html" class="nav-item">
                        <span class="nav-icon">â›“ï¸</span>
                        <span>Block & Transaction</span>
                    </a>
                    <a href="utxo-model.html" class="nav-item">
                        <span class="nav-icon">ğŸ’</span>
                        <span>UTXO Model</span>
                    </a>
                    <a href="consensus.html" class="nav-item active">
                        <span class="nav-icon">ğŸ”</span>
                        <span>Consensus & PoW</span>
                    </a>
                    <a href="validation.html" class="nav-item">
                        <span class="nav-icon">âœ…</span>
                        <span>Validation System</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">CONTRIBUTION SYSTEM</div>
                    <a href="contribution-overview.html" class="nav-item">
                        <span class="nav-icon">ğŸ¯</span>
                        <span>Contribution Overview</span>
                    </a>
                    <a href="contribution-types.html" class="nav-item">
                        <span class="nav-icon">ğŸ“‹</span>
                        <span>Contribution Types</span>
                    </a>
                    <a href="contribution-rewards.html" class="nav-item">
                        <span class="nav-icon">ğŸ’°</span>
                        <span>Reward System</span>
                    </a>
                    <a href="verification-system.html" class="nav-item">
                        <span class="nav-icon">ğŸ”</span>
                        <span>Verification System</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">MWEB PRIVACY</div>
                    <a href="mweb-overview.html" class="nav-item">
                        <span class="nav-icon">ğŸ”’</span>
                        <span>MWEB Overview</span>
                    </a>
                    <a href="mweb-structures.html" class="nav-item">
                        <span class="nav-icon">ğŸ—ï¸</span>
                        <span>MWEB Structures</span>
                    </a>
                    <a href="mweb-operations.html" class="nav-item">
                        <span class="nav-icon">âš¡</span>
                        <span>Peg-in/Peg-out</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">RPC API</div>
                    <a href="rpc-overview.html" class="nav-item">
                        <span class="nav-icon">ğŸ“¡</span>
                        <span>RPC Overview</span>
                    </a>
                    <a href="rpc-contribution.html" class="nav-item">
                        <span class="nav-icon">ğŸ“¤</span>
                        <span>Contribution RPC</span>
                    </a>
                    <a href="rpc-mweb.html" class="nav-item">
                        <span class="nav-icon">ğŸ”</span>
                        <span>MWEB RPC</span>
                    </a>
                    <a href="rpc-mining.html" class="nav-item">
                        <span class="nav-icon">â›ï¸</span>
                        <span>Mining RPC</span>
                    </a>
                    <a href="rpc-wallet.html" class="nav-item">
                        <span class="nav-icon">ğŸ‘›</span>
                        <span>Wallet RPC</span>
                    </a>
                    <a href="rpc-blockchain.html" class="nav-item">
                        <span class="nav-icon">â›“ï¸</span>
                        <span>Blockchain RPC</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">WALLET SYSTEM</div>
                    <a href="wallet-overview.html" class="nav-item">
                        <span class="nav-icon">ğŸ‘›</span>
                        <span>Wallet Overview</span>
                    </a>
                    <a href="wallet-classes.html" class="nav-item">
                        <span class="nav-icon">ğŸ“¦</span>
                        <span>Wallet Classes</span>
                    </a>
                    <a href="address-system.html" class="nav-item">
                        <span class="nav-icon">ğŸ“</span>
                        <span>Address System</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">QT GUI</div>
                    <a href="qt-overview.html" class="nav-item">
                        <span class="nav-icon">ğŸ–¥ï¸</span>
                        <span>GUI Overview</span>
                    </a>
                    <a href="qt-components.html" class="nav-item">
                        <span class="nav-icon">ğŸ§©</span>
                        <span>Components</span>
                    </a>
                    <a href="qt-models.html" class="nav-item">
                        <span class="nav-icon">ğŸ“Š</span>
                        <span>Models</span>
                    </a>
                    <a href="qt-themes.html" class="nav-item">
                        <span class="nav-icon">ğŸ¨</span>
                        <span>Themes</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">FEE STRUCTURE</div>
                    <a href="fee-system.html" class="nav-item">
                        <span class="nav-icon">ğŸ’µ</span>
                        <span>Fee System</span>
                    </a>
                    <a href="community-reserve.html" class="nav-item">
                        <span class="nav-icon">ğŸ¦</span>
                        <span>Community Reserve</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">TESTING</div>
                    <a href="testing-overview.html" class="nav-item">
                        <span class="nav-icon">ğŸ§ª</span>
                        <span>Testing Overview</span>
                    </a>
                    <a href="test-structures.html" class="nav-item">
                        <span class="nav-icon">ğŸ“</span>
                        <span>Test Structures</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">REFERENCE</div>
                    <a href="erd-diagram.html" class="nav-item">
                        <span class="nav-icon">ğŸ“</span>
                        <span>ERD Diagram</span>
                    </a>
                    <a href="naming-conventions.html" class="nav-item">
                        <span class="nav-icon">ğŸ“</span>
                        <span>Naming Conventions</span>
                    </a>
                    <a href="api-reference.html" class="nav-item">
                        <span class="nav-icon">ğŸ“š</span>
                        <span>Complete API Reference</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-header">
                <h1>Consensus & PoW</h1>
            </div>

            <section class="content-section">
                <h2>Proof-of-Work Consensus</h2>
                <p>Fleet Credits uses Scrypt-based Proof-of-Work for consensus.</p>
                <p><strong>Files:</strong> <code>src/pow.cpp</code>, <code>src/fleetcredits.cpp</code>, <code>src/chainparams.cpp</code></p>
                
                <h3>Block Reward</h3>
                <p>Fixed 10,000 FC per block, no halving. See <a href="contribution-rewards.html">Reward System</a> for contribution bonuses.</p>
                
                <h3>Difficulty Adjustment</h3>
                <p>Digishield algorithm adjusts difficulty every block to maintain 60-second block time.</p>
                
                <h3>Genesis Block Mining</h3>
                <p>The genesis block (block 0) is the foundation of the blockchain and must have valid Proof of Work. Fleet Credits now ships with pre-mined genesis data to keep startup snappy while still validating the same PoW.</p>
                
                <h4>Genesis Parameters (Mainnet)</h4>
                <ul>
                    <li><strong>Timestamp:</strong> November 4, 2025 00:00:00 UTC (<code>1730688000</code>)</li>
                    <li><strong>Nonce:</strong> <code>905381</code></li>
                    <li><strong>Difficulty:</strong> <code>0x1e0ffff0</code></li>
                    <li><strong>Reward:</strong> 10,000 FC</li>
                    <li><strong>Coinbase Message:</strong> <code>"Nintondo"</code></li>
                    <li><strong>Genesis Hash:</strong> <code>829a84f34599ea8e4ac00eb998ff13cdb6fcc20585017c4890e8fe001b8aa95f</code></li>
                    <li><strong>Merkle Root:</strong> <code>41644a825cd68f53c164e9eeddbbe82c408a61191f19e7954bf56291ee81d912</code></li>
                </ul>
                
                <pre><code>// src/chainparams.cpp (mainnet)
genesis = CreateGenesisBlock(1730688000, 905381, 0x1e0ffff0, 1, 10000 * COIN);
consensus.hashGenesisBlock = genesis.GetHash();
assert(consensus.hashGenesisBlock == uint256S("0x829a84f34599ea8e4ac00eb998ff13cdb6fcc20585017c4890e8fe001b8aa95f"));
assert(genesis.hashMerkleRoot == uint256S("0x41644a825cd68f53c164e9eeddbbe82c408a61191f19e7954bf56291ee81d912"));
</code></pre>
                
                <div class="info-box">
                    Hardcoding the mined values removes the expensive â€œmine-on-startupâ€ loop that previously delayed daemon launch by several minutes. Startup now validates the genesis block instantly while still enforcing PoW via the assertions above.
                </div>

                <h4>Testnet / Regtest</h4>
                <p>Testnet and regtest retain the runtime mining loop so developers can tweak consensus parameters without recomputing hashes. Their genesis blocks reuse the November 2025 timestamp but mine a nonce at startup (see the loop in the testnet/regtest sections of <code>chainparams.cpp</code>).</p>
                
                <h4>Why Explicit Validation?</h4>
                <p>Even with pre-mined values, the code still demonstrates the validation path:</p>
                <ul>
                    <li><strong>Guaranteed Validity:</strong> The asserted hash enforces the expected PoW result.</li>
                    <li><strong>Consistency:</strong> <code>CheckProofOfWork()</code> is still used at runtime; the hardcoded hash simply short-circuits mining.</li>
                    <li><strong>Integrity:</strong> Checkpoints store the same genesis hash at height 0.</li>
                    <li><strong>No AuxPow Confusion:</strong> Genesis blocks omit AuxPow so validation automatically falls back to standard PoW.</li>
                </ul>
                
                <h4>Genesis Block Validation</h4>
                <p>When validating blocks:</p>
                <ol>
                    <li><code>CheckAuxPowProofOfWork()</code> is called for all blocks</li>
                    <li>Genesis blocks have no AuxPow, so it falls back to <code>CheckProofOfWork()</code></li>
                    <li>Since genesis block was mined with <code>CheckProofOfWork()</code>, validation always passes</li>
                    <li>Checkpoint data stores genesis hash at height 0 for quick verification</li>
                </ol>
                
                <div class="note">
                    <strong>Critical:</strong> The genesis block MUST have valid PoW. The hardcoded values (and associated assertions) guarantee this at compile time while <code>CheckProofOfWork()</code> enforces it at runtime.
                </div>
            </section>
        </main>
    </div>

    <script src="../assets/js/main.js"></script>
</body>
</html>