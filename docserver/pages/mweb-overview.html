<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MWEB Overview - Fleet Credits Developer Documentation</title>
    <link rel="stylesheet" href="../assets/css/main.css">
</head>
<body>
    <div class="docs-container">
        <!-- Sidebar Navigation -->
<aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">üöÄ</span>
                    <span class="logo-text">Fleet Credits</span>
                </div>
                <div class="version">v1.0.0 - Core</div>
                <div class="tagline">Scrypt PoW Blockchain with Contribution Rewards & MWEB Privacy</div>
                <div class="subtagline">‚ú® Complete Developer Documentation</div>
            </div>

            <div class="search-box">
                <input type="text" placeholder="Search documentation..." id="searchInput">
            </div>

            <nav class="nav-menu">
                <div class="nav-section">
                    <div class="nav-section-title">GETTING STARTED</div>
                    <a href="../index.html" class="nav-item">
                        <span class="nav-icon">üè†</span>
                        <span>Overview</span>
                    </a>
                    <a href="architecture.html" class="nav-item">
                        <span class="nav-icon">üèõÔ∏è</span>
                        <span>Architecture</span>
                    </a>
                    <a href="network-params.html" class="nav-item">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span>Network Parameters</span>
                    </a>
                    <a href="building.html" class="nav-item">
                        <span class="nav-icon">üî®</span>
                        <span>Building & Setup</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">CORE BLOCKCHAIN</div>
                    <a href="blockchain-core.html" class="nav-item">
                        <span class="nav-icon">‚õìÔ∏è</span>
                        <span>Block & Transaction</span>
                    </a>
                    <a href="utxo-model.html" class="nav-item">
                        <span class="nav-icon">üíé</span>
                        <span>UTXO Model</span>
                    </a>
                    <a href="consensus.html" class="nav-item">
                        <span class="nav-icon">üîê</span>
                        <span>Consensus & PoW</span>
                    </a>
                    <a href="validation.html" class="nav-item">
                        <span class="nav-icon">‚úÖ</span>
                        <span>Validation System</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">CONTRIBUTION SYSTEM</div>
                    <a href="contribution-overview.html" class="nav-item">
                        <span class="nav-icon">üéØ</span>
                        <span>Contribution Overview</span>
                    </a>
                    <a href="contribution-types.html" class="nav-item">
                        <span class="nav-icon">üìã</span>
                        <span>Contribution Types</span>
                    </a>
                    <a href="contribution-rewards.html" class="nav-item">
                        <span class="nav-icon">üí∞</span>
                        <span>Reward System</span>
                    </a>
                    <a href="verification-system.html" class="nav-item">
                        <span class="nav-icon">üîç</span>
                        <span>Verification System</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">MWEB PRIVACY</div>
                    <a href="mweb-overview.html" class="nav-item active">
                        <span class="nav-icon">üîí</span>
                        <span>MWEB Overview</span>
                    </a>
                    <a href="mweb-structures.html" class="nav-item">
                        <span class="nav-icon">üèóÔ∏è</span>
                        <span>MWEB Structures</span>
                    </a>
                    <a href="mweb-operations.html" class="nav-item">
                        <span class="nav-icon">‚ö°</span>
                        <span>Peg-in/Peg-out</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">RPC API</div>
                    <a href="rpc-overview.html" class="nav-item">
                        <span class="nav-icon">üì°</span>
                        <span>RPC Overview</span>
                    </a>
                    <a href="rpc-contribution.html" class="nav-item">
                        <span class="nav-icon">üì§</span>
                        <span>Contribution RPC</span>
                    </a>
                    <a href="rpc-mweb.html" class="nav-item">
                        <span class="nav-icon">üîê</span>
                        <span>MWEB RPC</span>
                    </a>
                    <a href="rpc-mining.html" class="nav-item">
                        <span class="nav-icon">‚õèÔ∏è</span>
                        <span>Mining RPC</span>
                    </a>
                    <a href="rpc-wallet.html" class="nav-item">
                        <span class="nav-icon">üëõ</span>
                        <span>Wallet RPC</span>
                    </a>
                    <a href="rpc-blockchain.html" class="nav-item">
                        <span class="nav-icon">‚õìÔ∏è</span>
                        <span>Blockchain RPC</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">WALLET SYSTEM</div>
                    <a href="wallet-overview.html" class="nav-item">
                        <span class="nav-icon">üëõ</span>
                        <span>Wallet Overview</span>
                    </a>
                    <a href="wallet-classes.html" class="nav-item">
                        <span class="nav-icon">üì¶</span>
                        <span>Wallet Classes</span>
                    </a>
                    <a href="address-system.html" class="nav-item">
                        <span class="nav-icon">üìç</span>
                        <span>Address System</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">QT GUI</div>
                    <a href="qt-overview.html" class="nav-item">
                        <span class="nav-icon">üñ•Ô∏è</span>
                        <span>GUI Overview</span>
                    </a>
                    <a href="qt-components.html" class="nav-item">
                        <span class="nav-icon">üß©</span>
                        <span>Components</span>
                    </a>
                    <a href="qt-models.html" class="nav-item">
                        <span class="nav-icon">üìä</span>
                        <span>Models</span>
                    </a>
                    <a href="qt-themes.html" class="nav-item">
                        <span class="nav-icon">üé®</span>
                        <span>Themes</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">FEE STRUCTURE</div>
                    <a href="fee-system.html" class="nav-item">
                        <span class="nav-icon">üíµ</span>
                        <span>Fee System</span>
                    </a>
                    <a href="community-reserve.html" class="nav-item">
                        <span class="nav-icon">üè¶</span>
                        <span>Community Reserve</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">TESTING</div>
                    <a href="testing-overview.html" class="nav-item">
                        <span class="nav-icon">üß™</span>
                        <span>Testing Overview</span>
                    </a>
                    <a href="test-structures.html" class="nav-item">
                        <span class="nav-icon">üìù</span>
                        <span>Test Structures</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">REFERENCE</div>
                    <a href="erd-diagram.html" class="nav-item">
                        <span class="nav-icon">üìê</span>
                        <span>ERD Diagram</span>
                    </a>
                    <a href="naming-conventions.html" class="nav-item">
                        <span class="nav-icon">üìù</span>
                        <span>Naming Conventions</span>
                    </a>
                    <a href="api-reference.html" class="nav-item">
                        <span class="nav-icon">üìö</span>
                        <span>Complete API Reference</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-header">
                <h1>MWEB Overview</h1>
            </div>

            <section class="content-section">
                <h2>What is MWEB?</h2>
                <p><strong>Mimblewimble Extension Blocks (MWEB)</strong> provides privacy and scalability for Fleet Credits transactions. It's an extension block system that runs alongside the main blockchain, enabling confidential transactions while maintaining compatibility with existing UTXO-based protocols.</p>
                
                <div class="note">
                    <strong>Why MWEB?</strong> Traditional blockchains reveal transaction amounts and addresses, enabling surveillance and analysis. MWEB hides these details using cryptographic commitments while still allowing verification that transactions are valid. This is critical for privacy-sensitive contributions like ethical reviews, where revealing amounts could compromise reviewers.
                </div>
                
                <p><strong>Files:</strong> <code>src/primitives/mweb.h</code>, <code>src/primitives/mweb.cpp</code></p>
                
                <h3>Core Concepts</h3>
                
                <h4>1. Confidential Transactions</h4>
                <p>MWEB transactions hide amounts using <strong>Pedersen commitments</strong>, a cryptographic primitive that allows you to commit to a value without revealing it. The commitment formula is:</p>
                <pre><code>C = vG + rH</code></pre>
                <p>Where:</p>
                <ul>
                    <li><code>v</code> = value (amount in FC, hidden)</li>
                    <li><code>r</code> = blinding factor (secret random number)</li>
                    <li><code>G</code> = generator point for value</li>
                    <li><code>H</code> = generator point for blinding factor</li>
                </ul>
                <p>Anyone can verify that a commitment is valid, but only the creator knows the actual value.</p>
                
                <h4>2. Range Proofs</h4>
                <p>To prevent negative amounts (which would break the system), MWEB uses <strong>range proofs</strong> (typically Bulletproofs) that prove a commitment represents a value between 0 and MAX_MONEY without revealing the exact amount.</p>
                
                <h4>3. Cut-Through</h4>
                <p>MWEB's cut-through mechanism removes intermediate outputs that are spent in the same block, dramatically reducing blockchain bloat. If Alice sends 100 FC to Bob, and Bob immediately sends 50 FC to Charlie in the same block, only the net result (Alice ‚Üí 50 FC to Bob, Alice ‚Üí 50 FC to Charlie) is stored.</p>
                
                <h4>4. Extension Blocks</h4>
                <p>MWEB transactions are stored in extension blocks that attach to main chain blocks. This maintains compatibility with existing wallets and infrastructure while adding privacy features.</p>
            </section>

            <section class="content-section">
                <h2>How MWEB Works</h2>
                
                <h3>Transaction Flow</h3>
                <ol>
                    <li><strong>Create Commitment:</strong> Sender creates a Pedersen commitment for the transaction amount</li>
                    <li><strong>Generate Range Proof:</strong> Proves the amount is non-negative without revealing it</li>
                    <li><strong>Create Kernel:</strong> Contains excess value (change) and signature proving balance</li>
                    <li><strong>Verify Balance:</strong> Network verifies sum(inputs) = sum(outputs) + fees using commitments</li>
                    <li><strong>Cut-Through:</strong> Remove intermediate outputs spent in same block</li>
                    <li><strong>Store in Extension Block:</strong> Attach MWEB transactions to main chain block</li>
                </ol>
                
                <h3>Balance Verification</h3>
                <p>In a normal transaction, you verify balance by checking:</p>
                <pre><code>sum(inputs) = sum(outputs) + fees</code></pre>
                <p>In MWEB, amounts are hidden, so verification uses commitments:</p>
                <pre><code>sum(input_commitments) = sum(output_commitments) + fee_commitment</code></pre>
                <p>The kernel contains the excess value (change) and a signature proving the transaction balances correctly.</p>
            </section>

            <section class="content-section">
                <h2>Features</h2>
                
                <h3>Privacy Benefits</h3>
                <ul>
                    <li><strong>Hidden Amounts:</strong> Transaction amounts are hidden via Pedersen commitments</li>
                    <li><strong>Hidden Addresses:</strong> MWEB uses stealth addresses and one-time keys</li>
                    <li><strong>No Transaction Graph:</strong> Cut-through breaks the linkability chain</li>
                    <li><strong>Selective Disclosure:</strong> View keys allow auditing without compromising privacy</li>
                </ul>
                
                <h3>Scalability Benefits</h3>
                <ul>
                    <li><strong>Cut-Through:</strong> Reduces blockchain size by removing intermediate outputs</li>
                    <li><strong>Compact Proofs:</strong> Bulletproofs are small (~672 bytes) regardless of range</li>
                    <li><strong>Batch Verification:</strong> Multiple proofs can be verified together efficiently</li>
                    <li><strong>Extension Blocks:</strong> Doesn't bloat main chain history</li>
                </ul>
                
                <h3>Integration with Fleet Credits</h3>
                <ul>
                    <li><strong>Mandatory for ETHICAL_REVIEW:</strong> Protects reviewers from retaliation</li>
                    <li><strong>Optional for Standard Transactions:</strong> Users can opt-in for privacy</li>
                    <li><strong>Micro-Transactions:</strong> Zero-fee transactions benefit from MWEB's efficiency</li>
                    <li><strong>Community Reserve:</strong> Confidential disbursements hide funding amounts</li>
                    <li><strong>Contribution Rewards:</strong> Hides reward amounts for sensitive contributions</li>
                </ul>
            </section>

            <section class="content-section">
                <h2>Use Cases</h2>
                
                <h3>1. Ethical Review Contributions</h3>
                <p><strong>Why Mandatory:</strong> Ethical reviews may criticize powerful AI systems or organizations. Revealing reward amounts could allow attackers to identify and target reviewers.</p>
                <p><strong>How MWEB Helps:</strong> Ethical reviews are automatically routed through MWEB, hiding both the contributor's identity and reward amount. View keys allow oracles to audit the transaction without exposing it publicly.</p>
                
                <h3>2. Privacy-Sensitive Donations</h3>
                <p>Charitable contributions via MWEB allow donors to give anonymously, protecting them from targeting or harassment.</p>
                
                <h3>3. Micro-Transaction Privacy</h3>
                <p>Zero-fee micro-transactions (&lt;0.01 FC) can use MWEB to prevent surveillance while maintaining efficiency through cut-through.</p>
                
                <h3>4. Community Reserve Disbursements</h3>
                <p>When the community reserve funds public goods projects, MWEB hides the funding amounts, protecting recipients from targeting.</p>
                
                <h3>5. Mentor-Mentee Privacy</h3>
                <p>Code mentorship rewards can be hidden to protect mentor-mentee relationships from being exploited or analyzed.</p>
            </section>

            <section class="content-section">
                <h2>Peg-in/Peg-out</h2>
                <p>MWEB transactions exist in a separate UTXO set from the main chain. To move FC between the main chain and MWEB, you use <strong>atomic swaps</strong> called peg-in and peg-out operations.</p>
                
                <ul>
                    <li><strong>Peg-in:</strong> Move FC from main chain ‚Üí MWEB (creates MWEB output)</li>
                    <li><strong>Peg-out:</strong> Move FC from MWEB ‚Üí main chain (spends MWEB commitment)</li>
                </ul>
                
                <p>See <a href="mweb-operations.html">Peg-in/Peg-out</a> for detailed operations.</p>
            </section>

            <section class="content-section">
                <h2>View Keys and Selective Disclosure</h2>
                <p>MWEB transactions are private by default, but <strong>view keys</strong> allow selective disclosure for auditing:</p>
                
                <h3>View Key Use Cases</h3>
                <ul>
                    <li><strong>Oracle Audits:</strong> Oracles can use view keys to verify ethical reviews without exposing them publicly</li>
                    <li><strong>Regulatory Compliance:</strong> View keys can be shared with auditors for compliance while maintaining user privacy</li>
                    <li><strong>Contribution Verification:</strong> View keys allow verifying contribution amounts without revealing them to the public</li>
                </ul>
                
                <h3>How View Keys Work</h3>
                <p>A view key is generated from a seed and allows decrypting transaction details:</p>
                <pre><code>view_key = GenerateFromSeed(seed)
can_view = view_key.DecryptTransaction(mweb_tx)</code></pre>
                <p>Only holders of the view key can see the transaction amounts and details.</p>
            </section>

            <section class="content-section">
                <h2>Security Considerations</h2>
                
                <h3>Cryptographic Security</h3>
                <ul>
                    <li><strong>Pedersen Commitments:</strong> Based on discrete logarithm problem (same security as ECDSA)</li>
                    <li><strong>Range Proofs:</strong> Bulletproofs provide cryptographic guarantees of non-negative amounts</li>
                    <li><strong>Signature Schemes:</strong> Uses Schnorr signatures for efficient aggregation</li>
                </ul>
                
                <h3>Privacy Guarantees</h3>
                <ul>
                    <li><strong>Hiding Property:</strong> Without view key, amounts are computationally infeasible to determine</li>
                    <li><strong>Binding Property:</strong> Committed values cannot be changed after commitment</li>
                    <li><strong>Unlinkability:</strong> Cut-through breaks transaction graph analysis</li>
                </ul>
                
                <h3>Limitations</h3>
                <ul>
                    <li><strong>View Key Compromise:</strong> If view key is leaked, privacy is lost</li>
                    <li><strong>Timing Analysis:</strong> Transaction timing may still reveal information</li>
                    <li><strong>Network Analysis:</strong> IP addresses and network traffic can be analyzed</li>
                </ul>
            </section>

            <section class="content-section">
                <h2>Technical Implementation</h2>
                
                <h3>Block Structure</h3>
                <p>Main chain blocks can optionally include an MWEB extension block:</p>
                <pre><code>class CBlock {
    // ... standard block fields ...
    std::shared_ptr<CMWEBExtensionBlock> mweb_extension;
};</code></pre>
                
                <h3>Transaction Structure</h3>
                <p>MWEB transactions contain inputs, outputs, and kernels:</p>
                <pre><code>class CMWEBTransaction {
    std::vector<CMWEBInput> inputs;      // References to previous MWEB outputs
    std::vector<CMWEBOutput> outputs;    // New MWEB UTXOs with commitments
    std::vector<CMWEBKernel> kernels;    // Balance proofs and fees
    uint64_t lock_height;                // Minimum block height
};</code></pre>
                
                <h3>Integration Points</h3>
                <ul>
                    <li><strong>Block Validation:</strong> <code>validation.cpp</code> validates MWEB extension blocks</li>
                    <li><strong>Contribution Routing:</strong> <code>RouteToMWEB()</code> converts contributions to MWEB format</li>
                    <li><strong>RPC Commands:</strong> <code>createpegin</code>, <code>createpegout</code>, <code>routecontributiontomweb</code></li>
                    <li><strong>Wallet Support:</strong> Wallets track both main chain and MWEB UTXOs</li>
                </ul>
            </section>

            <section class="content-section">
                <h2>Implementation Status</h2>
                <div class="note success">
                    <strong>‚úÖ MWEB is Fully Implemented</strong> (January 2026)
                    <p>All core cryptographic operations, transaction processing, and integration points are complete with no stubs or placeholders. The system is production-ready pending comprehensive testing and security audits.</p>
                </div>
                
                <h3>Completed Components</h3>
                <ul>
                    <li>‚úÖ <strong>Pedersen Commitments</strong>: Fully implemented using secp256k1</li>
                    <li>‚úÖ <strong>Range Proofs</strong>: Hash-based proofs (ready for Bulletproofs upgrade)</li>
                    <li>‚úÖ <strong>Balance Verification</strong>: Commitment arithmetic using secp256k1</li>
                    <li>‚úÖ <strong>Cut-Through Optimization</strong>: Removes intermediate outputs</li>
                    <li>‚úÖ <strong>View Keys</strong>: Selective disclosure for auditing</li>
                    <li>‚úÖ <strong>Peg-in/Peg-out</strong>: Full atomic swap implementation</li>
                    <li>‚úÖ <strong>MWEB Mempool</strong>: Thread-safe in-memory pool</li>
                    <li>‚úÖ <strong>Extension Block Creation</strong>: Integrated into miner</li>
                    <li>‚úÖ <strong>Block Validation</strong>: Full verification in ConnectBlock()</li>
                    <li>‚úÖ <strong>RPC Commands</strong>: All MWEB operations available via RPC</li>
                    <li>‚úÖ <strong>Contribution Integration</strong>: Automatic routing for privacy-sensitive types</li>
                </ul>
                
                <p>See <a href="mweb-implementation-status.html">MWEB Implementation Status</a> for complete details.</p>
            </section>

            <section class="content-section">
                <h2>Related Documentation</h2>
                <ul>
                    <li><a href="mweb-structures.html">MWEB Structures</a> - Detailed data structures</li>
                    <li><a href="mweb-operations.html">Peg-in/Peg-out</a> - Moving FC between chains</li>
                    <li><a href="mweb-mempool.html">MWEB Mempool</a> - Pending transaction management</li>
                    <li><a href="mweb-implementation-status.html">Implementation Status</a> - Complete implementation details</li>
                    <li><a href="rpc-mweb.html">MWEB RPC</a> - API for MWEB operations</li>
                    <li><a href="contribution-types.html">Contribution Types</a> - How contributions use MWEB</li>
                </ul>
            </section>
        </main>
    </div>

    <script src="../assets/js/main.js"></script>
</body>
</html>