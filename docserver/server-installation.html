<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Installation Guide - Fleet Credits Documentation</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        h3 {
            color: #555;
            margin-top: 20px;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #e74c3c;
        }
        pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #3498db;
        }
        pre code {
            background: transparent;
            color: inherit;
            padding: 0;
        }
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .error {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .info {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #3498db;
            color: white;
        }
        tr:nth-child(even) {
            background: #f9f9f9;
        }
        .step {
            background: #e8f4f8;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
            border-radius: 4px;
        }
        .step-number {
            display: inline-block;
            background: #3498db;
            color: white;
            width: 30px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 10px;
        }
        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }
        li {
            margin: 8px 0;
        }
        .back-link {
            display: inline-block;
            margin-top: 20px;
            color: #3498db;
            text-decoration: none;
            padding: 8px 15px;
            border: 1px solid #3498db;
            border-radius: 4px;
        }
        .back-link:hover {
            background: #3498db;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Fleet Credits Server Installation Guide</h1>
        
        <p><strong>Complete step-by-step guide for deploying Fleet Credits on a fresh Ubuntu server.</strong></p>
        
        <div class="info">
            <strong>üìã Prerequisites:</strong> Fresh Ubuntu 20.04+ or 22.04+ server with root or sudo access. This guide assumes Ubuntu 24.04 but works on earlier versions.
        </div>

        <h2>üì¶ Step 1: System Preparation</h2>
        
        <div class="step">
            <span class="step-number">1</span>
            <strong>Update System Packages</strong>
            <pre><code>sudo apt-get update
sudo apt-get upgrade -y</code></pre>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>Install Build Dependencies</strong>
            <p>Fleet Credits requires these packages for compilation:</p>
            <pre><code>sudo apt-get install -y \
  build-essential \
  libtool \
  autotools-dev \
  automake \
  pkg-config \
  bsdmainutils \
  python3 \
  libssl-dev \
  libevent-dev \
  libboost-system-dev \
  libboost-filesystem-dev \
  libboost-chrono-dev \
  libboost-test-dev \
  libboost-thread-dev \
  libboost-program-options-dev \
  libminiupnpc-dev \
  libzmq5-dev \
  libqt5gui5 \
  libqt5core5a \
  libqt5dbus5 \
  qttools5-dev \
  qttools5-dev-tools \
  libprotobuf-dev \
  protobuf-compiler \
  libqrencode-dev \
  libdb++-dev \
  libdb-dev \
  autoconf-archive \
  git \
  curl</code></pre>
            
            <div class="warning">
                <strong>‚ö†Ô∏è Critical:</strong> <code>libdb++-dev</code> is required for wallet functionality. Without it, you'll get: <code>configure: error: libdb_cxx headers missing</code>
            </div>
            
            <div class="info">
                <strong>Note:</strong> For a headless server (no GUI), you can skip Qt5 packages. However, including them won't hurt and allows GUI builds later if needed.
            </div>
        </div>

        <h2>üì• Step 2: Clone Repository</h2>

        <div class="step">
            <span class="step-number">1</span>
            <strong>Navigate to Home Directory</strong>
            <pre><code>cd ~</code></pre>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>Clone Fleet Credits Repository</strong>
            <pre><code>git clone https://github.com/JeremyGits/FleetCredits.git</code></pre>
            
            <div class="success">
                <strong>‚úÖ Expected Output:</strong>
                <pre>Cloning into 'FleetCredits'...
remote: Enumerating objects: 1959, done.
remote: Counting objects: 100% (1959/1959), done.
remote: Compressing objects: 100% (1637/1637), done.
remote: Total 1959 (delta 253), reused 1891 (delta 209)
Receiving objects: 100% (1959/1959), 32.09 MiB | XX.XX MiB/s, done.
Resolving deltas: 100% (253/253), done.</pre>
            </div>
        </div>

        <div class="step">
            <span class="step-number">3</span>
            <strong>Navigate to Project Directory</strong>
            <pre><code>cd ~/FleetCredits</code></pre>
            
            <div class="warning">
                <strong>‚ö†Ô∏è Important:</strong> The source code is at the root of the cloned repository (<code>~/FleetCredits/</code>), NOT in a <code>fleetcredits/</code> subdirectory.
            </div>
        </div>

        <div class="step">
            <span class="step-number">4</span>
            <strong>Verify Repository Structure</strong>
            <pre><code>ls -la</code></pre>
            
            <p>You should see:</p>
            <ul>
                <li><code>autogen.sh</code> - Build configuration script</li>
                <li><code>configure.ac</code> - Autoconf configuration</li>
                <li><code>Makefile.am</code> - Automake input</li>
                <li><code>src/</code> - Source code directory</li>
                <li><code>build-aux/</code> - Build scripts</li>
                <li><code>contrib/</code> - Contribution scripts</li>
                <li>Other directories and files</li>
            </ul>
        </div>

        <h2>üîß Step 3: Fix Permissions</h2>

        <div class="step">
            <span class="step-number">1</span>
            <strong>Make Scripts Executable</strong>
            <p>Git may not preserve execute permissions. Fix this:</p>
            <pre><code>chmod +x autogen.sh genbuild.sh
chmod +x *.sh 2>/dev/null || true</code></pre>
            
            <div class="error">
                <strong>‚ùå Common Error:</strong> If you see <code>Permission denied</code> when running <code>./autogen.sh</code>, this is why. Always run <code>chmod +x</code> first.
            </div>
        </div>

        <h2>üèóÔ∏è Step 4: Build Configuration</h2>

        <div class="step">
            <span class="step-number">1</span>
            <strong>Install Autoconf Archive (Required for configure)</strong>
            <pre><code>sudo apt-get install -y autoconf-archive</code></pre>
            
            <div class="warning">
                <strong>‚ö†Ô∏è Critical:</strong> Without this, you'll get: <code>./configure: line 16791: syntax error near unexpected token '11,'</code>
            </div>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>Generate Configure Script</strong>
            <pre><code>./autogen.sh</code></pre>
            
            <div class="success">
                <strong>‚úÖ Expected Output:</strong> Script runs without errors. May take 30-60 seconds.
            </div>
            
            <div class="error">
                <strong>‚ùå If you see "Permission denied":</strong>
                <pre><code>chmod +x autogen.sh
./autogen.sh</code></pre>
            </div>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>Configure Build</strong>
            <p>For a headless server (seed node), use:</p>
            <pre><code>./configure \
  --with-gui=no \
  --enable-debug \
  --enable-tests \
  --enable-wallet \
  --with-miniupnpc \
  --enable-experimental-mweb \
  --enable-experimental-contributions</code></pre>
            
            <div class="info">
                <strong>Configuration Options:</strong>
                <ul>
                    <li><code>--with-gui=no</code> - Skip Qt GUI (faster build, saves dependencies)</li>
                    <li><code>--enable-debug</code> - Include debug symbols for troubleshooting</li>
                    <li><code>--enable-tests</code> - Build test suite</li>
                    <li><code>--enable-wallet</code> - Enable wallet functionality</li>
                </ul>
            </div>
            
            <div class="warning">
                <strong>‚ö†Ô∏è Common Error:</strong> If you see <code>configure: No such file or directory</code>, make sure <code>./autogen.sh</code> completed successfully first.
            </div>
        </div>

        <div class="step">
            <span class="step-number">3</span>
            <strong>Verify Configuration</strong>
            <p>Check the output for any errors. You should see:</p>
            <pre>configure: creating ./config.status
config.status: creating Makefile
...</pre>
        </div>

        <h2>‚öôÔ∏è Step 5: Compile</h2>

        <div class="step">
            <span class="step-number">1</span>
            <strong>Build Using All CPU Cores</strong>
            <pre><code>make -j$(nproc)</code></pre>
            
            <div class="info">
                <strong>‚è±Ô∏è Build Time:</strong> 
                <ul>
                    <li>4GB RAM, 2 CPU cores: ~20-30 minutes</li>
                    <li>8GB RAM, 4 CPU cores: ~10-15 minutes</li>
                    <li>16GB RAM, 8 CPU cores: ~5-10 minutes</li>
                </ul>
            </div>
            
            <div class="warning">
                <strong>‚ö†Ô∏è Common Error:</strong> If you see <code>make: *** No targets specified and no makefile found</code>, the <code>./configure</code> step failed. Go back and fix configuration errors.
            </div>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>Verify Build Success</strong>
            <pre><code>ls -lh src/fleetcreditsd
ls -lh src/fleetcredits-cli</code></pre>
            
            <p>You should see the binaries with executable permissions. Check version:</p>
            <pre><code>./src/fleetcreditsd -version</code></pre>
        </div>

        <h2>üîê Step 6: Firewall Configuration</h2>

        <div class="step">
            <span class="step-number">1</span>
            <strong>Enable Firewall (if not already enabled)</strong>
            <pre><code>sudo ufw enable</code></pre>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>Open P2P Ports</strong>
            <p>Allow incoming connections for peer-to-peer networking:</p>
            <pre><code># Mainnet P2P port
sudo ufw allow 22556/tcp

# Testnet P2P port (optional, for testing)
sudo ufw allow 44556/tcp</code></pre>
        </div>

        <div class="step">
            <span class="step-number">3</span>
            <strong>Configure RPC Access (Secure)</strong>
            <p><strong>Option A: Restrict to Your IP (Recommended)</strong></p>
            <pre><code># Replace YOUR_IP with your actual IP address
sudo ufw allow from YOUR_IP to any port 22555</code></pre>
            
            <p><strong>Option B: Allow from Anywhere (Less Secure, Easier for Testing)</strong></p>
            <pre><code>sudo ufw allow 22555/tcp</code></pre>
            
            <div class="warning">
                <strong>‚ö†Ô∏è Security Warning:</strong> RPC access without authentication can allow unauthorized access. Always use <code>rpcuser</code> and <code>rpcpassword</code> in configuration.
            </div>
        </div>

        <h2>üöÄ Step 7: Initial Test Run</h2>

        <div class="step">
            <span class="step-number">1</span>
            <strong>Test Daemon Startup (Regtest Mode)</strong>
            <pre><code>./src/fleetcreditsd -regtest -printtoconsole</code></pre>
            
            <p>You should see initialization messages. Press <code>Ctrl+C</code> to stop.</p>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>Test RPC Commands</strong>
            <pre><code># Start daemon in background
./src/fleetcreditsd -regtest -daemon

# Wait a few seconds, then test
./src/fleetcredits-cli -regtest getblockchaininfo
./src/fleetcredits-cli -regtest getnetworkinfo</code></pre>
        </div>

        <h2>üìÅ Step 8: Data Directory Setup</h2>

        <div class="step">
            <span class="step-number">1</span>
            <strong>Create Data Directory</strong>
            <pre><code>mkdir -p ~/.fleetcredits</code></pre>
            
            <div class="info">
                <strong>Data Directory Locations:</strong>
                <ul>
                    <li><strong>Mainnet:</strong> <code>~/.fleetcredits/</code></li>
                    <li><strong>Testnet:</strong> <code>~/.fleetcredits/testnet3/</code></li>
                    <li><strong>Regtest:</strong> <code>~/.fleetcredits/regtest/</code></li>
                </ul>
            </div>
        </div>

        <h2>‚öôÔ∏è Step 9: Configuration File</h2>

        <div class="step">
            <span class="step-number">1</span>
            <strong>Create Configuration File</strong>
            <pre><code>nano ~/.fleetcredits/fleetcredits.conf</code></pre>
            
            <p>Add basic configuration:</p>
            <pre><code># Fleet Credits Configuration File
# Mainnet
server=1
daemon=1
listen=1
bind=0.0.0.0
port=22556
rpcport=22555
rpcuser=YOUR_RPC_USERNAME
rpcpassword=YOUR_SECURE_PASSWORD
rpcallowip=127.0.0.1
rpcallowip=YOUR_IP_ADDRESS

# Logging
logtimestamps=1
debug=1

# Network
maxconnections=125
addnode=PEER_IP_1:22556
addnode=PEER_IP_2:22556</code></pre>
            
            <div class="warning">
                <strong>‚ö†Ô∏è Security:</strong> Change <code>YOUR_RPC_USERNAME</code> and <code>YOUR_SECURE_PASSWORD</code> to secure values. Restrict <code>rpcallowip</code> to trusted IPs.
            </div>
        </div>

        <h2>üîÑ Step 10: Systemd Service (Optional but Recommended)</h2>

        <div class="step">
            <span class="step-number">1</span>
            <strong>Create Service File</strong>
            <pre><code>sudo nano /etc/systemd/system/fleetcreditsd.service</code></pre>
            
            <p>Add the following (replace <code>YOUR_USERNAME</code> with your actual username):</p>
            <pre><code>[Unit]
Description=Fleet Credits Daemon
After=network.target

[Service]
Type=forking
User=YOUR_USERNAME
ExecStart=/home/YOUR_USERNAME/FleetCredits/src/fleetcreditsd -daemon -pid=/home/YOUR_USERNAME/.fleetcredits/fleetcreditsd.pid
ExecStop=/home/YOUR_USERNAME/FleetCredits/src/fleetcredits-cli stop
PIDFile=/home/YOUR_USERNAME/.fleetcredits/fleetcreditsd.pid
Restart=on-failure
RestartSec=10

[Install]
WantedBy=multi-user.target</code></pre>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>Enable and Start Service</strong>
            <pre><code>sudo systemctl daemon-reload
sudo systemctl enable fleetcreditsd
sudo systemctl start fleetcreditsd</code></pre>
        </div>

        <div class="step">
            <span class="step-number">3</span>
            <strong>Check Service Status</strong>
            <pre><code>sudo systemctl status fleetcreditsd</code></pre>
        </div>

        <h2>‚úÖ Step 11: Verify Installation</h2>

        <div class="step">
            <span class="step-number">1</span>
            <strong>Check Daemon is Running</strong>
            <pre><code>ps aux | grep fleetcreditsd</code></pre>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>Test RPC Connection</strong>
            <pre><code>./src/fleetcredits-cli getblockchaininfo
./src/fleetcredits-cli getnetworkinfo
./src/fleetcredits-cli getpeerinfo</code></pre>
        </div>

        <div class="step">
            <span class="step-number">3</span>
            <strong>Check Logs</strong>
            <pre><code>tail -f ~/.fleetcredits/debug.log</code></pre>
        </div>

        <h2>üêõ Troubleshooting</h2>

        <h3>Build Issues</h3>

        <div class="error">
            <strong>‚ùå Error: "Permission denied" when running autogen.sh</strong>
            <pre><code>chmod +x autogen.sh genbuild.sh
./autogen.sh</code></pre>
        </div>

        <div class="error">
            <strong>‚ùå Error: "/bin/bash: line 1: ../share/genbuild.sh: Permission denied"</strong>
            <p>Solution: Make genbuild.sh executable:</p>
            <pre><code># Fix genbuild.sh permissions
chmod +x share/genbuild.sh
chmod +x genbuild.sh

# Also fix all other scripts
find . -name "*.sh" -type f -exec chmod +x {} \;

# Then continue build
make -j$(nproc)</code></pre>
        </div>

        <div class="error">
            <strong>‚ùå Error: "No such file or directory: configure"</strong>
            <p>Solution: Make sure <code>./autogen.sh</code> completed successfully first.</p>
        </div>

        <div class="error">
            <strong>‚ùå Error: "./configure: line 16791: syntax error near unexpected token '11,'"</strong>
            <p>Solution: Install autoconf-archive package:</p>
            <pre><code>sudo apt-get install -y autoconf-archive
# Then re-run autogen and configure
./autogen.sh
./configure --with-gui=no --enable-debug --enable-tests --enable-wallet</code></pre>
        </div>

        <div class="error">
            <strong>‚ùå Error: "No rule to make target 'libunivalue.la'"</strong>
            <p>Solution: The univalue library needs to be built first. Run:</p>
            <pre><code># First, make sure autoconf-archive is installed
sudo apt-get install -y autoconf-archive

# Build univalue library first
cd src/univalue
chmod +x autogen.sh  # Make sure it's executable
./autogen.sh
./configure
make
cd ../..

# Then build the main project
make -j$(nproc)</code></pre>
            <p><strong>Alternative:</strong> Clean and rebuild everything from scratch:</p>
            <pre><code>make distclean
./autogen.sh
./configure --with-gui=no --enable-debug --enable-tests --enable-wallet
make -j$(nproc)</code></pre>
        </div>

        <div class="error">
            <strong>‚ùå Error: "No targets specified and no makefile found"</strong>
            <p>Solution: <code>./configure</code> failed. Check for missing dependencies:</p>
            <pre><code>./configure --with-gui=no 2>&1 | grep -i "missing\|error"</code></pre>
        </div>

        <div class="error">
            <strong>‚ùå Error: "libdb_cxx headers missing"</strong>
            <p>Solution: Install Berkeley DB development package:</p>
            <pre><code>sudo apt-get install libdb++-dev libdb-dev</code></pre>
            <p>Then re-run configure:</p>
            <pre><code>./configure --with-gui=no --enable-debug --enable-tests --enable-wallet</code></pre>
            <p><strong>Alternative:</strong> If you don't need wallet functionality, disable it:</p>
            <pre><code>./configure --with-gui=no --disable-wallet</code></pre>
        </div>

        <div class="error">
            <strong>‚ùå Error: "Could not link against boost_filesystem !"</strong>
            <p>Solution: Install Boost Filesystem development package and ensure proper linking:</p>
            <pre><code>sudo apt-get install libboost-filesystem-dev libboost-system-dev libboost-program-options-dev
sudo apt-get install libboost-all-dev  # Or install all Boost packages</code></pre>
            <p>If error persists, try:</p>
            <pre><code># Clean previous configure attempts
make distclean 2>/dev/null || true
rm -f config.cache

# Re-run configure
./configure --with-gui=no --enable-debug --enable-tests --enable-wallet</code></pre>
        </div>

        <div class="error">
            <strong>‚ùå Error: Missing dependencies during configure</strong>
            <p>Solution: Install the missing package. Common ones:</p>
            <pre><code>sudo apt-get install libdb++-dev libdb-dev  # Berkeley DB (required for wallet)
sudo apt-get install libboost-all-dev  # All Boost libraries (fixes most Boost issues)</code></pre>
        </div>

        <h3>Runtime Issues</h3>

        <div class="error">
            <strong>‚ùå Error: "Address already in use"</strong>
            <p>Solution: Port is already in use. Find and kill the process:</p>
            <pre><code>sudo netstat -tulpn | grep 22556
sudo kill <PID></code></pre>
        </div>

        <div class="error">
            <strong>‚ùå Error: "RPC_IN_WARMUP"</strong>
            <p>Solution: Daemon is still initializing. Wait 30-60 seconds and try again.</p>
        </div>

        <div class="error">
            <strong>‚ùå Error: "Cannot connect to fleetcreditsd"</strong>
            <p>Solution: Check if daemon is running and RPC is configured:</p>
            <pre><code>ps aux | grep fleetcreditsd
tail -50 ~/.fleetcredits/debug.log</code></pre>
        </div>

        <h3>Network Issues</h3>

        <div class="error">
            <strong>‚ùå Error: "No connections" or "0 peers"</strong>
            <p>Solution: Fleet Credits is a new network with no seed nodes yet. You need to:</p>
            <ul>
                <li>Manually connect peers using <code>-addnode</code> flag</li>
                <li>Or wait for other nodes to come online</li>
                <li>For testnet, connect to other test nodes manually</li>
            </ul>
        </div>

        <h2>üìä Server Requirements</h2>

        <table>
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Minimum</th>
                    <th>Recommended</th>
                    <th>Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>RAM</td>
                    <td>4GB</td>
                    <td>8GB</td>
                    <td>Fresh blockchain uses ~500MB, grows to ~2GB after 1 year</td>
                </tr>
                <tr>
                    <td>CPU</td>
                    <td>2 cores</td>
                    <td>4 cores</td>
                    <td>Any modern CPU works</td>
                </tr>
                <tr>
                    <td>Disk</td>
                    <td>20GB</td>
                    <td>50GB+</td>
                    <td>SSD recommended. Blockchain grows ~1GB/year initially</td>
                </tr>
                <tr>
                    <td>Network</td>
                    <td>1TB/month</td>
                    <td>2TB/month</td>
                    <td>Seed nodes use more bandwidth</td>
                </tr>
            </tbody>
        </table>

        <h2>üéØ Next Steps</h2>

        <ol>
            <li><strong>Configure as Seed Node:</strong> Add your server IP to <code>chainparams.cpp</code> (if you're a maintainer)</li>
            <li><strong>Connect to Network:</strong> Use <code>-addnode</code> to connect to other nodes</li>
            <li><strong>Monitor:</strong> Set up log rotation and monitoring</li>
            <li><strong>Backup:</strong> Regularly backup <code>wallet.dat</code> if using wallet</li>
        </ol>

        <h2>üìö Additional Resources</h2>

        <ul>
            <li><a href="network-architecture.html">Network Architecture</a> - Understanding the P2P network</li>
            <li><a href="connecting-to-network.html">Connecting to Network</a> - How to connect peers</li>
            <li><a href="../README.md">README</a> - Project overview</li>
        </ul>

        <div class="success">
            <strong>‚úÖ Installation Complete!</strong> Your Fleet Credits node should now be running. Check the logs and verify connectivity with <code>getpeerinfo</code>.
        </div>

        <a href="../index.html" class="back-link">‚Üê Back to Documentation Index</a>
    </div>
</body>
</html>

